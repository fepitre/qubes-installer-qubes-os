From 23fca7141dcb21b3e3b01c01e7044549dc8bee38 Mon Sep 17 00:00:00 2001
From: "Frederic Pierret (Epitre)" <frederic.epitre@orange.fr>
Date: Tue, 19 Sep 2017 20:25:04 +0200
Subject: [PATCH 29/29] anaconda: consider Interrupt Remapping as required
 feature

QubesOS/qubes-issues#2977
---
 pyanaconda/iutil.py | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/pyanaconda/iutil.py b/pyanaconda/iutil.py
index 1274dd6..ef484fe 100644
--- a/pyanaconda/iutil.py
+++ b/pyanaconda/iutil.py
@@ -1119,6 +1119,8 @@ def is_unsupported_hw():
                     missing_features.append('IOMMU/VT-d/AMD-Vi')
         if b'HVM: Hardware Assisted Paging (HAP) detected' not in xl_dmesg:
             missing_features.append('HAP/SLAT/EPT/RVI')
+        if b'Intel VT-d Interrupt Remapping enabled' not in xl_dmesg:
+            missing_features.append('Interrupt Remapping')
         status = ', '.join(missing_features)
 
     if status:
-- 
2.9.5

