From 08d818c69d3ab40ff92e5a5a209a51a85e9ee1d7 Mon Sep 17 00:00:00 2001
From: "Frederic Pierret (Epitre)" <frederic.epitre@orange.fr>
Date: Tue, 19 Sep 2017 20:04:37 +0200
Subject: [PATCH 22/29] anaconda: switch default partitioning scheme to LVM
 Thin Provisioning

QubesOS/qubes-issues#2412
---
 pyanaconda/ui/gui/spokes/storage.py | 4 ++--
 pyanaconda/ui/tui/spokes/storage.py | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/pyanaconda/ui/gui/spokes/storage.py b/pyanaconda/ui/gui/spokes/storage.py
index 4871667..7f6d4c4 100644
--- a/pyanaconda/ui/gui/spokes/storage.py
+++ b/pyanaconda/ui/gui/spokes/storage.py
@@ -77,7 +77,7 @@ from pyanaconda.bootloader import BootLoaderError
 from pyanaconda.storage_utils import on_disk_storage
 from pyanaconda.screen_access import sam
 
-from pykickstart.constants import CLEARPART_TYPE_NONE, AUTOPART_TYPE_LVM
+from pykickstart.constants import CLEARPART_TYPE_NONE, AUTOPART_TYPE_LVM, AUTOPART_TYPE_LVM_THINP
 from pykickstart.errors import KickstartParseError
 
 import sys
@@ -629,7 +629,7 @@ class StorageSpoke(NormalSpoke, StorageCheckHandler):
         self.autopart = self.data.autopart.autopart
         self.autoPartType = self.data.autopart.type
         if self.autoPartType is None:
-            self.autoPartType = AUTOPART_TYPE_LVM
+            self.autoPartType = AUTOPART_TYPE_LVM_THINP
         self.encrypted = self.data.autopart.encrypted
         self.passphrase = self.data.autopart.passphrase
 
diff --git a/pyanaconda/ui/tui/spokes/storage.py b/pyanaconda/ui/tui/spokes/storage.py
index 2d28774..acf78aa 100644
--- a/pyanaconda/ui/tui/spokes/storage.py
+++ b/pyanaconda/ui/tui/spokes/storage.py
@@ -42,7 +42,7 @@ from pyanaconda.constants_text import INPUT_PROCESSED
 from pyanaconda.i18n import _, P_, N_, C_
 from pyanaconda.bootloader import BootLoaderError
 
-from pykickstart.constants import CLEARPART_TYPE_ALL, CLEARPART_TYPE_LINUX, CLEARPART_TYPE_NONE, AUTOPART_TYPE_LVM
+from pykickstart.constants import CLEARPART_TYPE_ALL, CLEARPART_TYPE_LINUX, CLEARPART_TYPE_NONE, AUTOPART_TYPE_LVM, AUTOPART_TYPE_LVM_THINP
 from pykickstart.errors import KickstartParseError
 
 from collections import OrderedDict
@@ -352,7 +352,7 @@ class StorageSpoke(NormalTUISpoke):
         self.data.clearpart.drives = self.selected_disks[:]
 
         if self.data.autopart.type is None:
-            self.data.autopart.type = AUTOPART_TYPE_LVM
+            self.data.autopart.type = AUTOPART_TYPE_LVM_THINP
 
         if self.autopart:
             self.clearPartType = CLEARPART_TYPE_ALL
-- 
2.9.5

